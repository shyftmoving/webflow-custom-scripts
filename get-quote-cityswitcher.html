<style>
  .get-quote__details-selected-items {
    margin-right: 14px;
    margin-bottom: 14px;
    padding: 6px 16px 6px 6px;
    background-repeat: no-repeat;
    background-position: 12px center;
    /* border: 1px solid #d6d6d6; */
    border-radius: 20px;
    font-weight: 600;
  }
  .get-quote__move-details.lower-setion h4 {
    color: #249dc8;
  }
  .get-quote__move-details.lower-setion h5 {
    margin: 0;
  }
  .image-35 {
    position: relative;
    top: 2px;
    display: inline-block;
    margin-right: 6px;
    -webkit-align-self: flex-start;
    -ms-flex-item-align: start;
    align-self: flex-start;
  }

  .cs-div-block-34 {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    margin-bottom: 12px;
    padding-right: 22px;
  }

  .cs-div-block-61 {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    margin-bottom: 12px;
  }

  .lower-section-wrapper {
    margin-top: 11px;
    padding-top: 18px;
    border-top: 1px solid #d6d6d6;
  }

  .get-quote__details-selected-location {
    color: #000;
    font-size: 15px;
    font-weight: 600;
  }

  .get-quote__details-selected-location.title {
    display: inline-block;
    color: #000;
  }

  .get-quote__details-selected-location.date-value {
    display: inline-block;
    margin-left: 8px;
  }

  .image-36 {
    border-radius: 20px;
  }

  .get-quote__move-details {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -webkit-box-align: stretch;
    -webkit-align-items: stretch;
    -ms-flex-align: stretch;
    align-items: stretch;
    padding: 32px;
  }

  .get-quote__move-details.lower-setion {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
    -webkit-box-pack: start;
    -webkit-justify-content: flex-start;
    -ms-flex-pack: start;
    justify-content: flex-start;
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    -ms-flex-align: start;
    align-items: flex-start;
    padding: 32px;
  }

  .get-quote__frame {
    width: 48%;
    padding-right: 0px;
    border-radius: 20px;
    background-color: #fff;
  }
  #showMap {
    min-height: 300px;
    min-width: 400px;
    border-radius: 20px 20px 0 0;
  }
  @media (max-width: 991px) {
    #showMap {
      min-width: auto;
    }
    .get-quote__frame {
      width: 100%;
    }
  }
</style>

<div id="move-details" class="get-quote__move-details--wrapper">
  <div id="showMap"></div>
  <div class="get-quote__move-details">
    <div class="cs-div-block-34">
      <img
        src="https://uploads-ssl.webflow.com/62fe0f37e2ed5483937f6661/631af2bff0eb1c4537768f2c_cs-summary-icon-location.svg"
        loading="lazy"
        width="15"
        alt=""
        class="image-35"
      />
      <div>
        <div class="get-quote__details-selected-location title">
          Moving from:
        </div>
        <div class="get-quote__details-selected-location">{{movingFrom}}</div>
      </div>
    </div>
    <div class="cs-div-block-61">
      <img
        src="https://uploads-ssl.webflow.com/62fe0f37e2ed5483937f6661/631af2bff0eb1c4537768f2c_cs-summary-icon-location.svg"
        loading="lazy"
        width="15"
        alt=""
        class="image-35"
      />
      <div>
        <div class="get-quote__details-selected-location title">Moving to:</div>
        <div class="get-quote__details-selected-location">{{movingTo}}</div>
      </div>
    </div>
    <div class="cs-div-block-61">
      <img
        src="https://uploads-ssl.webflow.com/62fe0f37e2ed5483937f6661/631af2be454ccea35c484f0b_cs-summary-icon-calendar.svg"
        loading="lazy"
        width="15"
        alt=""
        class="image-35"
      />
      <div>
        <div class="get-quote__details-selected-location title">
          Moving date:
        </div>
        <div class="get-quote__details-selected-location date-value">
          {{movingDate}}
        </div>
        <div
          v-if="movingDateFlexible"
          class="get-quote__details-selected-location date-value"
        >
          (flexibile)
        </div>
      </div>
    </div>
  </div>
  <div class="lower-section-wrapper">
    <div class="get-quote__move-details lower-setion">
      <div
        v-if="movingServices == 'true'"
        class="get-quote__details-selected-items lower-details__type"
      >
        <h4>Moving Services</h4>
        <h5>{{ typeOfProperty }}</h5>
        <h5>{{ moveSize }}</h5>
        <h5 v-if="storage == 'true'">I need storage</h5>
        <div v-if="movingVehicle == 'true'" class="">
          <h5>Vehicle details: {{movingVehicleDetails}}</h5>
          <h5>Vehicle moving date: {{movingVehicleDate}}</h5>
        </div>
      </div>
      <div
        v-if="housingServices == 'true'"
        class="get-quote__details-selected-items lower-details__type"
      >
        <h4>Housing Services</h4>
        <div v-if="rent == 'true'" class="">
          <h5>Rent period: {{rentPeriod}}</h5>
          <h5>Rent budget: {{rentBudget}}</h5>
          <h5>Rent size: {{rentSize}}</h5>
          <h5>Rent move-in date: {{rentDate}}</h5>
        </div>
        <h5 v-if="buyOrSell == 'true'">
          I am selling or buying house/apartment
        </h5>
      </div>
      <div
        v-if="additionalServices == 'true'"
        class="get-quote__details-selected-items lower-details__type"
      >
        <h4>Additional Services</h4>
        <h5 v-if="settlingInServices == 'true'">Settling In Services</h5>
        <h5 v-if="insurance == 'true'">Insurance</h5>
        <h5 v-if="lifestyle == 'true'">Lifestyle</h5>
        <div v-if="petMoving == 'true'" class="">
          <h5>Pet's breed: {{petBreed}}</h5>
          <h5>Pet's weight: {{petWeight}}</h5>
          <h5>Pet's move-in date: {{petMoveDate}}</h5>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- --------------- Vue code------------------------- -->
<script>
  var app = new Vue({
    el: '#move-details',
    data: {
      movingFrom: localStorage.movingFrom,
      movingFromCoord: {
        lat: parseFloat(localStorage.movingFromLat),
        lng: parseFloat(localStorage.movingFromLng)
      },
      movingTo: localStorage.movingTo,
      movingToCoord: {
        lat: parseFloat(localStorage.movingToLat),
        lng: parseFloat(localStorage.movingToLng)
      },
      movingDate: localStorage.movingDate,
      movingDateFlexible: JSON.parse(localStorage.movingDateFlexible),
      // Details
      movingServices: localStorage.movingServices,
      typeOfProperty: localStorage.typeOfProperty,
      moveSize: localStorage.moveSize,
      storage: localStorage.storage,
      movingVehicle: localStorage.movingVehicle,
      movingVehicleDetails: localStorage.movingVehicleDetails,
      movingVehicleDate: localStorage.movingVehicleDate,
      housingServices: localStorage.housingServices,
      rent: localStorage.rent,
      rentPeriod: localStorage.rentPeriod,
      rentBudget: localStorage.rentBudget,
      rentSize: localStorage.rentSize,
      rentFurnished: localStorage.rentFurnished,
      rentDate: localStorage.rentDate,
      buyOrSell: localStorage.buyOrSell,
      additionalServices: localStorage.additionalServices,
      settlingInServices: localStorage.settlingInServices,
      insurance: localStorage.insurance,
      lifestyle: localStorage.lifestyle,
      petMoving: localStorage.petMoving,
      petBreed: localStorage.petBreed,
      petWeight: localStorage.petWeight,
      petMoveDate: localStorage.petMoveDate
    },
    methods: {
      displayDirections: async function () {
        let directionsService = new google.maps.DirectionsService()
        let directionsRenderer = new google.maps.DirectionsRenderer()
        let mapOptions = {
          travelMode: 'DRIVING',
          unitSystem: google.maps.UnitSystem.IMPERIAL
        }
        let map = new google.maps.Map(
          document.getElementById('showMap'),
          mapOptions
        )
        directionsRenderer.setMap(map)
        let request = {
          origin: this.movingFrom,
          destination: this.movingTo,
          travelMode: 'DRIVING'
        }
        try {
          await directionsService.route(request, function (result, status) {
            if (status == 'OK') {
              localStorage.distance = parseInt(
                result.routes[0].legs[0].distance.text.replace(/,/g, '')
              )
              directionsRenderer.setDirections(result)
            }
          })
        } catch (err) {
          localStorage.distance = 0
          this.displayFailsafeMap()
        }
      },
      displayFailsafeMap: async function () {
        let mapOptions = {
          zoom: 1,
          minZoom: 1,
          center: new google.maps.LatLng(0, 0)
        }
        let failsafeMap = new google.maps.Map(
          document.getElementById('showMap'),
          mapOptions
        )
        const marker1 = new google.maps.Marker({
          position: this.movingFromCoord,
          map: failsafeMap
        })
        const marker2 = new google.maps.Marker({
          position: this.movingToCoord,
          map: failsafeMap
        })
      }
    },
    mounted() {
      this.displayDirections()
    }
  })
</script>
